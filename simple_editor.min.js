/**
 * simple-editor - Medium.com like editor with plugin architecture
 * @author     James Nicol
 * @link       undefined
 * @license    MIT
 */
!function(t,e){"use strict";if("function"==typeof define&&define.amd)define(["jquery"],function(i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("jquery");module.exports=e(t,i)}else t.SimpleEditor=e(t,t.jQuery)}(this,function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,n={_canLog:!1,detectDebugMode:function(){if(window){var t,e;if(!i.call(window,"console"))return;t=this,e=window.location.search.replace(/^\?/,"").split("&");for(var n in e){var o=e[n];/^log=/.test(o)&&(t._canLog=!0)}}},log:function(){this._canLog&&console.log.apply(console,arguments)}};n.detectDebugMode();var o={tidy:function(){this._removeComments(),this._removeNonWhiteListedTags(),this._removeNonWhiteListedAttrs()},_removeComments:function(){var t=this.$target.html();t=t.replace(/<!--[\s\S]*?-->/g,""),t=e.trim(t),this.$target.html(t)},_removeNonWhiteListedTags:function(){var t=this;this.$target.find("span").each(function(t,i){var n=e(i),o=e(i).text();n.parent().text(o)}),this.$target.find("*").each(function(i,n){var o=n.tagName.toLowerCase();-1===e.inArray(o,t.options.tagWhiteList)&&e(n).remove()})},_removeNonWhiteListedAttrs:function(){this.$target.find("p, ul, li").each(function(t,i){for(var n=0;n<i.attributes.length;n++){var o=i.attributes[n].name;e(i).removeAttr(o)}}),this.$target.find("a").each(function(t,i){for(var n=0;n<i.attributes.length;n++){var o=i.attributes[n].name;("href"!==o||"target"!==o)&&e(i).removeAttr(o)}})}},s=function(t,i){i=i||{},this.$target=e(t),this.target=this.$target[0],this.options={cssClass:i.cssClass||"f-content-section",headingElement:i.headingElement||"H2",minHeight:i.minHeight||100},this.options.tagWhiteList=i.tagWhiteList||["p","b","strong","i","em","ul","li","a",this.options.headingElement],this._setupTarget(),this._keyboardListeners(),this.log("Simple Editor initialized!",t)};return s.prototype={_setupTarget:function(){this.$target.addClass(this.options.cssClass),this.$target.prop("contentEditable",!0),this.$target.css({outline:"none",minHeight:this.options.minHeight}),0===this.$target.html().length&&this.paragraph()},_keyboardListeners:function(){var t=this;this.$target.on("paste",null,function(){setTimeout(function(){t.tidy()},100)})},bold:function(){document.execCommand("bold"),this.target.focus()},italic:function(){document.execCommand("italic"),this.target.focus()},unorderedList:function(){document.execCommand("insertUnorderedList"),this.target.focus()},heading:function(){document.execCommand("formatBlock",!1,this.options.headingElement),this.target.focus()},paragraph:function(){document.execCommand("formatBlock",!1,"P"),this.target.focus()},link:function(t){document.execCommand("createLink",!1,t),this.$target.find("a").prop("target","_blank"),this.target.focus()},unlink:function(){document.execCommand("unlink"),this.target.focus()},content:function(){return e.trim(this.$target.html())}},e.extend(s.prototype,n,o),s.VERSION="0.0.1",s});